local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- Membuat window utama
local Window = OrionLib:MakeWindow({
    Name = "Blade Ball",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "OrionTest",
})

-- Memanggil Init pada objek Window
if Window and type(Window.Init) == "function" then
    Window:Init()
else
    warn("Window Init function is missing!")
end

-- Notifikasi ketika GUI di-load
OrionLib:MakeNotification({
    Name = "Execution Started",
    Content = "GUI successfully loaded!",
    Image = nil,
    Time = 5
})

-- Tab utama
local Tab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483362458",
    PremiumOnly = false
})

-- SERVICES
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")

-- Orion Library Initialization
local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()
local Window = OrionLib:MakeWindow({Name = "Game Controls", HidePremium = true})

-- VARIABLES
local player = Players.LocalPlayer
local ballFolder = workspace:WaitForChild("Balls")
local isAutoParryActive = false
local isAutoSpamActive = false
local spamKey = Enum.KeyCode.F -- Tombol untuk auto spam

local function isBallTarget(ball)
    return ball:GetAttribute("target") == player.Name and ball:GetAttribute("realBall") == true
end

local function canParry(ball)
    local distance = (ball.Position - player.Character.HumanoidRootPart.Position).Magnitude
    return distance <= 10 -- Jarak untuk parry
end

local function performParry()
    local Remotes = ReplicatedStorage:WaitForChild("Remotes")
    if Remotes:FindFirstChild("ParryButtonPress") then
        Remotes.ParryButtonPress:Fire()
        print("Parry executed!")
    else
        print("ParryButtonPress remote not found!")
    end
end

local function autoParry()
    while isAutoParryActive do
        for _, ball in pairs(ballFolder:GetChildren()) do
            if isBallTarget(ball) and canParry(ball) then
                performParry()
                wait(0.1) -- Jeda antara parry
            end
        end
        wait(0.1) -- Periksa setiap sedikit waktu
    end
end

local function autoSpam()
    while isAutoSpamActive do
        local closestBall = nil
        local closestDistance = math.huge

        for _, ball in pairs(ballFolder:GetChildren()) do
            if isBallTarget(ball) then
                local distance = (ball.Position - player.Character.HumanoidRootPart.Position).Magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    closestBall = ball
                end
            end
        end

        if closestBall then
            VirtualInputManager:SendKeyEvent(true, spamKey, false, nil)
            wait(0.1) -- Jeda spam
            VirtualInputManager:SendKeyEvent(false, spamKey, false, nil)
            print("Auto Spam executed!")
        end

        wait(0.1) -- Periksa setiap sedikit waktu
    end
end

-- UI Setup
local Tab = Window:MakeTab({
    Name = "Auto Controls",
    Icon = "rbxassetid://6035031244", -- Ganti dengan asset ID yang sesuai
    Premium = false,
})

Tab:AddToggle({
    Name = "Auto Parry",
    Default = false,
    Callback = function(Value)
        isAutoParryActive = Value
        if Value then
            print("Auto Parry activated.")
            autoParry()
        else
            print("Auto Parry deactivated.")
        end
    end
})

Tab:AddToggle({
    Name = "Auto Spam",
    Default = false,
    Callback = function(Value)
        isAutoSpamActive = Value
        if Value then
            print("Auto Spam activated.")
            autoSpam()
        else
            print("Auto Spam deactivated.")
        end
    end
})

print("Auto Parry and Auto Spam scripts loaded successfully.")
