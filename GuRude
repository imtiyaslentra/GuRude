local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- Membuat window utama
local Window = OrionLib:MakeWindow({
    Name = "Vico Hub",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "OrionTest",
})

-- Memanggil Init pada objek Window
if Window and type(Window.Init) == "function" then
    Window:Init() -- Memungkinkan GUI untuk bisa dipindahkan
else
    warn("Window Init function is missing!") -- Mengeluarkan peringatan jika Init tidak ada
end

-- Notifikasi ketika GUI di-load
OrionLib:MakeNotification({
    Name = "Execution Started",
    Content = "GUI successfully loaded!",
    Image = nil,
    Time = 5
})

-- Tab utama
local Tab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483362458",
    PremiumOnly = false
})

-- Mendapatkan Remote Event Parry
local function resolve_parry_Remote()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    for _, value in pairs(ReplicatedStorage:GetChildren()) do
        local temp_remote = value:FindFirstChildOfClass('RemoteEvent')
        if temp_remote and not temp_remote.Name:find('\n') then
            return temp_remote
        end
    end
    return nil
end

local originalParryRemote = resolve_parry_Remote()

-- Fungsi Auto Parry
local function AutoParry()
    local Debug = true -- Aktifkan debug output
    local Players = game:GetService("Players")
    local Player = Players.LocalPlayer or Players.PlayerAdded:Wait()
    local Balls = workspace:WaitForChild("Balls", 9e9)

    -- Functions
    local function print(...) -- Debug print.
        if Debug then
            warn(...)
        end
    end

    local function VerifyBall(Ball) -- Validasi bola
        return typeof(Ball) == "Instance" and Ball:IsA("BasePart") and Ball:IsDescendantOf(Balls) and Ball:GetAttribute("realBall") == true
    end

    local function IsTarget() -- Cek apakah kita target
        return (Player.Character and Player.Character:FindFirstChild("Highlight"))
    end

    local function Parry() -- Eksekusi parry
        if originalParryRemote then
            originalParryRemote:FireServer()
            print("Parry executed!") -- Output debug jika parry berhasil
        else
            print("Parry remote not found!") -- Output debug jika remote tidak ditemukan
        end
    end

    -- Actual code
    Balls.ChildAdded:Connect(function(Ball)
        if not VerifyBall(Ball) then
            return
        end
        
        print(`Ball Spawned: {Ball}`)
        
        local OldPosition = Ball.Position
        local OldTick = tick()
        
        Ball:GetPropertyChangedSignal("Position"):Connect(function()
            if IsTarget() then -- Jika kita adalah target
                local Distance = (Ball.Position - workspace.CurrentCamera.Focus.Position).Magnitude
                local Velocity = (OldPosition - Ball.Position).Magnitude
                
                print(`Distance: {Distance}\nVelocity: {Velocity}\nTime: {Distance / Velocity}\nParry Condition: {(Distance / Velocity) <= 10}`)

                -- Pastikan kecepatan tidak nol
                if Velocity > 0 and (Distance / Velocity) <= 10 then
                    Parry()
                end
            end
            
            if (tick() - OldTick >= 1/60) then -- Cek pembaruan posisi
                OldTick = tick()
                OldPosition = Ball.Position
            end
        end)
    end)
end

-- Tombol Auto Parry pada tab
Tab:AddButton({
    Name = "Auto Parry (Op)",
    Callback = function()
        AutoParry()
    end
})

-- Tambahkan tombol untuk memeriksa ping
Tab:AddButton({
    Name = "Check Ping (Ms)",
    Callback = function()
        local player = game.Players.LocalPlayer
        local ping = player:GetNetworkPing()

        OrionLib:MakeNotification({
            Name = "Ping Status",
            Content = "Ping: " .. ping .. " ms",
            Image = nil,
            Time = 5
        })
    end
})

-- Fitur drag GUI
Window:Init() -- Pastikan GUI dapat dipindahkan

-- Event saat parry berhasil
originalParryRemote.OnClientEvent:Connect(function()
    -- Tambahkan efek suara atau efek lainnya di sini
end)

-- Event untuk mengatur ulang data ketika bola dihapus
workspace:WaitForChild("Balls").ChildRemoved:Connect(function(child)
    -- Reset data atau logika lain saat bola dihapus
end)
